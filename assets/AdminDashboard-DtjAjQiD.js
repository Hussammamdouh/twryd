const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProfileCard-Df3nKwXu.js","assets/index-Cclg67os.js","assets/index-DjZTIiOz.css","assets/AdminsTable-AYu1bQvv.js","assets/Modal-DoRxSVjK.js","assets/Spinner-BtaP2GZ9.js","assets/api-BUuAVsLY.js","assets/SuppliersTable-biizq_fJ.js","assets/ConfirmModal-Dok-e16l.js","assets/Categories-Cv5x784Q.js","assets/useQuery-xOW4UwSP.js","assets/FileUpload-BGMLlkR2.js","assets/Governates-C59XQNu-.js","assets/Areas-DDoOLMXD.js"])))=>i.map(i=>d[i]);
import{u as b,c as y,r as s,j as e,N as _,R as i,e as M,f,g as E,a as A,_ as g}from"./index-Cclg67os.js";import{T as W}from"./ThemeToggle-wdlk3O_i.js";import{E as p,L as w}from"./ErrorBoundary-Co6U-e6J.js";import{g as z}from"./api-BUuAVsLY.js";const S=[{name:"Profile",to:"/admin-dashboard/profile",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})})},{name:"Admins",to:"/admin-dashboard/admins",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a4 4 0 00-3-3.87M9 20H4v-2a4 4 0 013-3.87m9-7a4 4 0 11-8 0 4 4 0 018 0z"})})},{name:"Suppliers",to:"/admin-dashboard/suppliers",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7v4a1 1 0 001 1h3m10-5v4a1 1 0 001 1h3m-7 4v4m0 0H7a2 2 0 01-2-2v-5a2 2 0 012-2h10a2 2 0 012 2v5a2 2 0 01-2 2h-5z"})})},{name:"Categories",to:"/admin-dashboard/categories",icon:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24","aria-hidden":"true",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M8 9h8M8 15h8",stroke:"currentColor",strokeWidth:"2"})]})},{name:"Governates",to:"/admin-dashboard/governates",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 110-16 8 8 0 010 16zm0-14a6 6 0 100 12 6 6 0 000-12z"})})},{name:"Areas",to:"/admin-dashboard/areas",icon:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}];function N({open:o,onClose:c}){const{logout:a,user:t}=b(),m=y(),[n,l]=s.useState(!1),r=s.useMemo(()=>m.pathname,[m.pathname]),j=s.useCallback(()=>{window.confirm("Are you sure you want to logout?")&&a()},[a]),x=s.useCallback(()=>{l(d=>!d)},[]),u=s.useCallback(()=>{c()},[c]);return e.jsxs("aside",{className:`
        theme-sidebar h-full bg-gradient-to-b from-primary-600 via-primary-500 to-primary-400 text-white flex flex-col py-8 px-4 fixed left-0 top-0 z-20 min-h-screen shadow-xl border-r border-primary-700 transition-all duration-300
        ${o?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static md:block
        ${n?"w-16":"w-64"}
      `,"aria-label":"Admin sidebar navigation",role:"complementary",children:[e.jsx("button",{className:"md:hidden absolute top-4 right-4 text-white text-3xl focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 rounded z-10",onClick:u,"aria-label":"Close sidebar",tabIndex:o?0:-1,children:"Ã—"}),e.jsx("button",{onClick:x,className:"hidden md:block absolute top-4 right-2 p-2 text-white hover:bg-primary-700 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-primary-600","aria-label":n?"Expand sidebar":"Collapse sidebar",tabIndex:0,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{className:"flex items-center gap-3 mb-12 px-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center shadow-lg",children:e.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24","aria-hidden":"true",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12l2 2 4-4"})]})}),!n&&e.jsx("span",{className:"text-2xl font-extrabold tracking-tight font-display",children:"Twryd"})]}),e.jsx("nav",{className:"flex flex-col gap-2 flex-1 mt-2 overflow-y-auto scrollbar-thin scrollbar-thumb-primary-700 scrollbar-track-transparent","aria-label":"Admin main navigation",role:"navigation",children:S.map(d=>e.jsxs(_,{to:d.to,className:({isActive:v})=>`flex items-center gap-4 px-6 py-3 rounded-lg my-1 font-semibold transition-all duration-200 text-base group relative flex-shrink-0
              ${v?"bg-primary-700 text-white shadow border-l-4 border-white":"text-primary-100 hover:bg-primary-400/40 hover:text-white focus:bg-primary-400/60 focus:text-white"}
              ${n?"justify-center px-3":""}
              `,onClick:u,tabIndex:0,"aria-label":d.name,title:n?d.name:void 0,children:[e.jsx("span",{className:"w-6 h-6 flex items-center justify-center flex-shrink-0",children:d.icon}),!n&&e.jsx("span",{children:d.name}),n&&r===d.to&&e.jsx("div",{className:"absolute right-1 w-2 h-2 bg-white rounded-full border border-primary-700"})]},d.name))}),!n&&t&&e.jsxs("div",{className:"mt-auto pt-6 border-t border-primary-500",children:[e.jsxs("div",{className:"flex items-center gap-3 px-6 py-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-full bg-white/20 flex items-center justify-center text-white font-bold text-lg shadow",children:t.name?t.name[0].toUpperCase():t.email?t.email[0].toUpperCase():"A"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:t.name||t.email}),e.jsx("div",{className:"text-xs text-primary-200",children:t.role==="admin"?"Administrator":"User"})]})]}),e.jsxs("button",{onClick:j,className:"w-full flex items-center gap-3 px-6 py-3 text-primary-100 hover:bg-primary-400/40 hover:text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-white","aria-label":"Logout",tabIndex:0,children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{children:"Logout"})]})]})]})}function C({title:o,onMenuClick:c}){const{user:a,logout:t}=b(),[m,n]=s.useState(""),[l,r]=s.useState(!1),j=s.useMemo(()=>a?.name?a.name.split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2):"AD",[a?.name]),x=s.useCallback(h=>{n(h.target.value)},[]),u=s.useCallback(()=>{c()},[c]),d=s.useCallback(()=>{r(h=>!h)},[]),v=s.useCallback(()=>{window.confirm("Are you sure you want to logout?")&&t(),r(!1)},[t]),k=s.useCallback(h=>{h.key==="Escape"&&r(!1)},[]);return i.useEffect(()=>{const h=L=>{l&&!L.target.closest(".user-menu")&&r(!1)};return document.addEventListener("mousedown",h),document.addEventListener("keydown",k),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",k)}},[l,k]),e.jsxs("header",{className:"theme-topbar flex items-center justify-between h-16 px-8 fixed left-64 top-0 right-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 shadow-sm",children:[e.jsx("button",{className:"md:hidden mr-2 text-theme-text text-3xl focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2 rounded p-1",onClick:u,"aria-label":"Open sidebar",children:e.jsx("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("h1",{className:"text-2xl font-bold text-theme-text tracking-tight drop-shadow-sm flex items-center h-full",children:o}),e.jsxs("div",{className:"flex items-center gap-4 h-full",children:[e.jsx(W,{variant:"button"}),e.jsxs("div",{className:"relative flex items-center h-full",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-theme-text-secondary pointer-events-none",children:e.jsxs("svg",{width:"18",height:"18",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[e.jsx("circle",{cx:"11",cy:"11",r:"7",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",d:"M21 21l-3.5-3.5"})]})}),e.jsx("input",{type:"text",placeholder:"Search...",value:m,onChange:x,className:"theme-input pl-10 pr-3 py-2 rounded text-sm transition-shadow focus:shadow-lg w-56 h-10",style:{minWidth:180},"aria-label":"Search"})]}),e.jsxs("div",{className:"relative user-menu",children:[e.jsx("button",{onClick:d,className:"w-10 h-10 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-700 dark:text-primary-300 font-bold text-lg shadow hover:bg-primary-200 dark:hover:bg-primary-800/40 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-400","aria-label":"User menu","aria-expanded":l,"aria-haspopup":"true",children:e.jsx("span",{children:j})}),l&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-sm font-medium text-theme-text",children:a?.name||a?.email}),e.jsx("div",{className:"text-xs text-theme-text-secondary",children:a?.role==="admin"?"Administrator":"User"})]}),e.jsx("button",{onClick:v,className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors focus:outline-none focus:bg-red-50 dark:focus:bg-red-900/20",children:"Logout"})]})]})]})]})}const T=i.lazy(()=>g(()=>import("./ProfileCard-Df3nKwXu.js"),__vite__mapDeps([0,1,2]))),P=i.lazy(()=>g(()=>import("./AdminsTable-AYu1bQvv.js"),__vite__mapDeps([3,1,2,4,5,6]))),B=i.lazy(()=>g(()=>import("./SuppliersTable-biizq_fJ.js"),__vite__mapDeps([7,1,2,6,8,4]))),I=i.lazy(()=>g(()=>import("./Categories-Cv5x784Q.js"),__vite__mapDeps([9,1,2,10,6,4,11]))),R=i.lazy(()=>g(()=>import("./Governates-C59XQNu-.js"),__vite__mapDeps([12,1,2,6]))),O=i.lazy(()=>g(()=>import("./Areas-DDoOLMXD.js"),__vite__mapDeps([13,1,2,6,4,8]))),D=()=>e.jsxs("div",{className:"min-h-screen bg-theme-bg flex flex-col",children:[e.jsx(C,{title:"Loading..."}),e.jsxs("div",{className:"flex-1 flex flex-row",children:[e.jsx(N,{open:!1,onClose:()=>{}}),e.jsx("main",{className:"flex-1 transition-all duration-300 pt-16 md:pl-64 px-2 md:px-8 relative z-0",children:e.jsx(w,{type:"dashboard"})})]})]}),U=()=>{const{token:o,logout:c}=b(),a=A(),[t,m]=i.useState(null),[n,l]=i.useState(!0),[r,j]=i.useState(null),x=s.useCallback(async()=>{l(!0),j(null);try{const u=await z("/api/v1/profile",{token:o});m(u.data)}catch(u){j(u.message),a.show(u.message,"error")}finally{l(!1)}},[o,a]);return i.useEffect(()=>{o&&x()},[o,x]),n?e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] theme-surface p-8",children:e.jsx(w,{type:"profile"})}):r?e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] theme-surface p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-theme-text mb-2",children:"Failed to load profile"}),e.jsx("p",{className:"text-theme-text-secondary mb-4",children:r}),e.jsx("button",{onClick:x,className:"theme-button",children:"Retry"})]})}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] theme-surface p-8",children:e.jsx("div",{className:"flex justify-center w-full",children:e.jsx(T,{name:t?.name,email:t?.email,phone:t?.phone,onLogout:c,role:t?.role})})})};function F(){const{token:o}=b(),c=y(),[a,t]=i.useState(!1),m=s.useMemo(()=>{const r=c.pathname;return r.endsWith("/admins")?"Admins":r.endsWith("/suppliers")?"Suppliers":r.endsWith("/categories")?"Categories":r.endsWith("/governates")?"Governates":r.endsWith("/areas")?"Areas":"Profile"},[c.pathname]),n=s.useCallback(()=>t(!0),[]),l=s.useCallback(()=>t(!1),[]);return e.jsx(p,{children:e.jsxs("div",{className:"min-h-screen bg-theme-bg flex flex-col",children:[e.jsx(C,{title:m,onMenuClick:n}),e.jsxs("div",{className:"flex-1 flex flex-row",children:[e.jsx(N,{open:a,onClose:l}),e.jsx("main",{className:"flex-1 transition-all duration-300 pt-16 md:pl-64 px-2 md:px-8 relative z-0",children:e.jsx(s.Suspense,{fallback:e.jsx(D,{}),children:e.jsxs(M,{children:[e.jsx(f,{index:!0,element:e.jsx(E,{to:"profile",replace:!0})}),e.jsx(f,{path:"profile",element:e.jsx(p,{children:e.jsx(U,{})})}),e.jsx(f,{path:"admins",element:e.jsx(p,{children:e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] theme-surface p-8",children:e.jsx("div",{className:"flex justify-center w-full",children:e.jsx(P,{token:o})})})})}),e.jsx(f,{path:"suppliers",element:e.jsx(p,{children:e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] theme-surface p-8",children:e.jsx("div",{className:"flex justify-center w-full",children:e.jsx(B,{token:o})})})})}),e.jsx(f,{path:"categories",element:e.jsx(p,{children:e.jsx(I,{})})}),e.jsx(f,{path:"governates",element:e.jsx(p,{children:e.jsx(R,{})})}),e.jsx(f,{path:"areas",element:e.jsx(p,{children:e.jsx(O,{})})})]})})})]})]})})}export{F as default};
