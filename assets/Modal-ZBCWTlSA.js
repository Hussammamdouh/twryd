import{r as e,j as o}from"./index-BciHiggx.js";const E=(c=null)=>{const l=e.useRef(null),d=e.useRef(c),n=e.useCallback(t=>{l.current=t},[]),b=e.useCallback(()=>{if(l.current)l.current.focus();else if(d.current){const t=document.getElementById(d.current);t&&t.focus()}},[]),x=e.useCallback(t=>{if(t?.current){const a=t.current.querySelector("input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled])");a&&(a.focus(),n(a))}},[n]),f=e.useCallback(t=>{n(t.target)},[n]),m=e.useCallback(()=>{},[]);return{setFocusedInput:n,restoreFocus:b,focusFirstInput:x,handleInputFocus:f,handleInputBlur:m,focusedInputRef:l}},I=e.memo(({open:c,onClose:l,children:d,title:n,className:b="",size:x="default",closeOnOverlayClick:f=!0,closeOnEscape:m=!0,showCloseButton:t=!0})=>{const a=e.useRef(),v=e.useRef(null),r=n?`modal-title-${Math.random().toString(36).slice(2)}`:void 0,{focusFirstInput:y}=E(),u=e.useCallback(()=>{l&&l()},[l]),w=e.useCallback(s=>{f&&s.target===s.currentTarget&&u()},[f,u]),h=e.useCallback(s=>{if(m&&s.key==="Escape"&&u(),s.key==="Tab"){const i=a.current?.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])');if(!i||i.length===0)return;const k=i[0],g=i[i.length-1];!s.shiftKey&&document.activeElement===g?(s.preventDefault(),k.focus()):s.shiftKey&&document.activeElement===k&&(s.preventDefault(),g.focus())}},[m,u]);e.useEffect(()=>{if(!c)return;v.current=document.activeElement,a.current?.focus(),document.addEventListener("keydown",h),document.body.style.overflow="hidden";const s=setTimeout(()=>{y(a)},100);return()=>{clearTimeout(s),document.removeEventListener("keydown",h),document.body.style.overflow="",v.current?.focus()}},[c,h,y]);const p={small:"max-w-sm",medium:"max-w-md",default:"max-w-md",large:"max-w-lg",xlarge:"max-w-xl",full:"max-w-full mx-4"},j=p[x]||p.default;return c?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm animate-fadeIn",role:"dialog","aria-modal":"true","aria-labelledby":r,"aria-describedby":r?`${r}-desc`:void 0,tabIndex:-1,onClick:w,children:o.jsxs("div",{ref:a,tabIndex:-1,className:`theme-modal rounded-2xl shadow-2xl p-6 w-full ${j} relative outline-none animate-scaleIn ${b}`,role:"document",children:[(n||t)&&o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n&&o.jsx("h2",{id:r,className:"text-xl font-bold text-theme-text",children:n}),t&&o.jsx("button",{onClick:u,"aria-label":"Close modal",className:"p-2 text-theme-text-secondary hover:text-theme-text hover:bg-theme-surface rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{id:r?`${r}-desc`:void 0,children:d})]})}):null});I.displayName="Modal";export{I as M,E as u};
