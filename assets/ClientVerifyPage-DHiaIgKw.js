import{r as l,a as y,j as e,c as b,b as w}from"./index-Cclg67os.js";import{p as x}from"./api-BUuAVsLY.js";function j({onVerified:a,identifier:i}){const[s,o]=l.useState(i||""),[c,h]=l.useState(""),[d,m]=l.useState(!1),[f,u]=l.useState(!1),r=y(),p=async t=>{t.preventDefault(),m(!0);try{const n=await x("/api/client/verify",{data:{identifier:s,code:c}});if(n.success)r.show("Verification successful!","success"),a&&a();else throw new Error(n.message||"Verification failed")}catch(n){r.show(n.message,"error")}finally{m(!1)}},g=async()=>{u(!0);try{await x("/api/client/email/resend",{data:{email_or_phone:s}}),r.show("Verification code resent!","success")}catch(t){r.show(t.message,"error")}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-theme-bg px-2 py-8",children:e.jsxs("div",{className:"w-full max-w-md theme-card rounded-2xl shadow-2xl p-8 sm:p-10 flex flex-col items-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold text-center mb-2 tracking-tight text-theme-text",children:"Verify Your Account"}),e.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full mb-8"}),e.jsxs("form",{onSubmit:p,className:"w-full flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"identifier",className:"text-base font-medium text-theme-text",children:"Email or Phone"}),e.jsx("input",{id:"identifier",type:"text",required:!0,className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Enter your email or phone",value:s,onChange:t=>o(t.target.value),disabled:!!i})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"code",className:"text-base font-medium text-theme-text",children:"Verification Code"}),e.jsx("input",{id:"code",type:"text",required:!0,className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Enter the code you received",value:c,onChange:t=>h(t.target.value)})]}),e.jsx("button",{type:"submit",disabled:d,className:"theme-button w-full py-3 font-bold rounded-lg shadow-lg hover:scale-[1.02] hover:shadow-xl active:scale-95 transition-all duration-150 disabled:opacity-60 text-base mt-2 flex items-center justify-center gap-2",children:d?"Verifying...":"Verify"})]}),e.jsx("button",{onClick:g,disabled:f||!s,className:"mt-6 text-primary-600 dark:text-primary-400 hover:underline disabled:opacity-60",children:f?"Resending...":"Resend Verification Code"})]})})}function V(){const a=b(),i=w(),s=a.state?.identifier||new URLSearchParams(a.search).get("identifier")||"",o=()=>{i("/login-client")};return e.jsx(j,{identifier:s,onVerified:o})}export{V as default};
