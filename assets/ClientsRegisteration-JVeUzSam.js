import{r as n,j as e}from"./index-BBFhNgLA.js";import{p as b}from"./api-BUuAVsLY.js";import{F as h}from"./FileUpload-10VCYoUT.js";function y(){const[t,i]=n.useState({name:"",email:"",phone:"",whatsapp:"",password:"",passwordConfirm:"",tax_card_number:"",tax_card_file:null,cr_number:"",cr_file:null,latitude:"",longitude:"",areaId:""}),[o,m]=n.useState(!1),[u,c]=n.useState(""),[f,p]=n.useState(!1);n.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(s=>{i(a=>({...a,latitude:s.coords.latitude.toFixed(6),longitude:s.coords.longitude.toFixed(6)}))},s=>{console.log("Location access denied or error:",s.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},[]);const l=s=>{const{name:a,value:d,files:r}=s.target;i(r?x=>({...x,[a]:r[0]}):x=>({...x,[a]:d}))},g=async s=>{if(s.preventDefault(),c(""),p(!1),m(!0),t.password!==t.passwordConfirm){c("Passwords do not match"),m(!1);return}try{const a=new FormData;a.append("name",t.name),a.append("email",t.email),a.append("phone",t.phone),a.append("whatsapp",t.whatsapp),a.append("password",t.password),a.append("password_confirmation",t.passwordConfirm),a.append("tax_card_number",t.tax_card_number),t.tax_card_file&&a.append("tax_card_file",t.tax_card_file),a.append("cr_number",t.cr_number),t.cr_file&&a.append("cr_file",t.cr_file),a.append("latitude",t.latitude),a.append("longitude",t.longitude),a.append("area_id",t.areaId);const d=await b("/api/client/register",{data:a});if(!d.success)throw new Error(d.message||"Registration failed");p(!0),setTimeout(()=>{const r=t.email||t.phone;window.location.href=`/verify-client${r?`?identifier=${encodeURIComponent(r)}`:""}`},1500)}catch(a){c(a.message)}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-theme-bg px-2 py-8",role:"main",children:e.jsxs("div",{className:"theme-card w-full max-w-lg p-8 sm:p-10 flex flex-col items-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-extrabold text-center mb-2 tracking-tight text-theme-text",children:"Client Registration"}),e.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full mb-8"}),e.jsxs("form",{onSubmit:g,className:"w-full flex flex-col gap-6",encType:"multipart/form-data","aria-busy":o,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"name",className:"text-base font-medium text-theme-text",children:"Client Name"}),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Enter client name",value:t.name,onChange:l})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"email",className:"text-base font-medium text-theme-text",children:"Email"}),e.jsx("input",{type:"email",name:"email",id:"email",className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Enter your email",value:t.email,onChange:l})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"phone",className:"text-base font-medium text-theme-text",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",id:"phone",className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Enter your phone number",value:t.phone,onChange:l})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"whatsapp",className:"text-base font-medium text-theme-text",children:"WhatsApp Number"}),e.jsx("input",{type:"tel",name:"whatsapp",id:"whatsapp",className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Enter your WhatsApp number",value:t.whatsapp,onChange:l})]}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx("label",{htmlFor:"password",className:"text-base font-medium text-theme-text",children:"Password"}),e.jsx("input",{type:"password",name:"password",id:"password",required:!0,className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Enter password",value:t.password,onChange:l})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx("label",{htmlFor:"passwordConfirm",className:"text-base font-medium text-theme-text",children:"Confirm Password"}),e.jsx("input",{type:"password",name:"passwordConfirm",id:"passwordConfirm",required:!0,className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Confirm password",value:t.passwordConfirm,onChange:l})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"tax_card_number",className:"text-base font-medium text-theme-text",children:"Tax Card Number"}),e.jsx("input",{type:"text",name:"tax_card_number",id:"tax_card_number",required:!0,className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Enter tax card number",value:t.tax_card_number,onChange:l})]}),e.jsx(h,{id:"tax_card_file",name:"tax_card_file",accept:"image/*",required:!0,onChange:l,label:"Tax Card File",maxSize:2*1024*1024}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"cr_number",className:"text-base font-medium text-theme-text",children:"Commercial Registration Number"}),e.jsx("input",{type:"text",name:"cr_number",id:"cr_number",required:!0,className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Enter commercial registration number",value:t.cr_number,onChange:l})]}),e.jsx(h,{id:"cr_file",name:"cr_file",accept:"image/*",required:!0,onChange:l,label:"Commercial Registration File",maxSize:2*1024*1024}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx("label",{htmlFor:"latitude",className:"text-base font-medium text-theme-text",children:"Latitude"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",name:"latitude",id:"latitude",className:"theme-input flex-1 px-4 py-3 rounded-md text-base",placeholder:"Latitude will be auto-detected",value:t.latitude,onChange:l}),e.jsx("button",{type:"button",onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(s=>{i(a=>({...a,latitude:s.coords.latitude.toFixed(6),longitude:s.coords.longitude.toFixed(6)}))},s=>{console.log("Location access denied or error:",s.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},className:"px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",title:"Get current location",children:"üìç"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[e.jsx("label",{htmlFor:"longitude",className:"text-base font-medium text-theme-text",children:"Longitude"}),e.jsx("input",{type:"text",name:"longitude",id:"longitude",className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Longitude will be auto-detected",value:t.longitude,onChange:l})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"areaId",className:"text-base font-medium text-theme-text",children:"Area ID"}),e.jsx("input",{type:"text",name:"areaId",id:"areaId",required:!0,className:"theme-input w-full px-4 py-3 rounded-md text-base",placeholder:"Enter area ID",value:t.areaId,onChange:l})]}),u&&e.jsx("div",{className:"text-red-600 text-sm text-center",children:u}),f&&e.jsx("div",{className:"text-green-600 text-sm text-center",children:"Registration successful!"}),e.jsxs("button",{type:"submit",disabled:o,"aria-label":"Register",className:"theme-button w-full py-3 font-bold rounded-lg shadow-lg hover:scale-[1.02] hover:shadow-xl active:scale-95 transition-all duration-150 disabled:opacity-60 text-base mt-2 flex items-center justify-center gap-2",children:[o&&e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o?"Registering...":"Register"]})]})]})})}export{y as default};
