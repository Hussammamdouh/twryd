const m="https://back.twryd.com";async function o(t,{method:e="GET",token:a,data:n,params:c,onLogout:f,headers:h={},...p}={}){let u=m+t;if(c){const l=new URLSearchParams(c).toString();u+="?"+l}const i={Accept:"application/json",...h};a&&(i.Authorization=`Bearer ${a}`),n&&!(n instanceof FormData)&&(i["Content-Type"]="application/json");const d=n?n instanceof FormData?n:JSON.stringify(n):void 0,r=await fetch(u,{method:e,headers:i,body:d,...p});if(r.status===401||r.status===403)throw f&&f(),new Error("Session expired. Please log in again.");let s;try{s=await r.json()}catch{s={}}if(!r.ok)throw new Error(s.message||"Request failed");return s}function w(t,e){return o(t,{...e,method:"GET"})}function E(t,e){return o(t,{...e,method:"POST"})}function T(t,e){return o(t,{...e,method:"PUT"})}function g(t,e){return o(t,{...e,method:"PATCH"})}function y(t,e){return o(t,{...e,method:"DELETE"})}export{T as a,g as b,y as d,w as g,E as p};
