import{k as y,u as w,a as N,r as n,j as e,L}from"./index-BBFhNgLA.js";import{g as C,b as M}from"./api-BUuAVsLY.js";import{d as F}from"./pdfUtils-DNxLv-n2.js";import{S as B}from"./Spinner-DiswAH3X.js";function A(){const{orderId:s}=y(),{token:i}=w(),o=N(),[r,c]=n.useState(null),[p,x]=n.useState(!0),[a,h]=n.useState(!1),[m,g]=n.useState(!1),u=async()=>{x(!0);try{const t=await C(`/api/supplier/orders/${s}`,{token:i});c(t.data||null)}catch(t){o.show(t.message||"Failed to load order details","error"),c(null)}finally{x(!1)}};n.useEffect(()=>{i&&s&&u()},[i,s]);const l=async(t,f={})=>{h(!0);try{let d="";switch(t){case"processing":d=`/api/supplier/orders/${s}/processing`;break;case"deliver":d=`/api/supplier/orders/${s}/deliver`;break;case"cancel":d=`/api/supplier/orders/${s}/cancel`;break;default:throw new Error("Invalid action")}await M(d,{token:i,data:f}),o.show(`Order ${t} successful!`,"success"),u()}catch(d){o.show(d.message||`Failed to ${t} order`,"error")}finally{h(!1)}},b=t=>{switch(t?.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"processing":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"delivered":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},j=t=>{switch(t?.toLowerCase()){case"pending":return e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})});case"processing":return e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})});case"delivered":return e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"cancelled":return e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});default:return e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},k=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),v=async()=>{if(r){g(!0);try{await F(r,"supplier"),o.show("Invoice downloaded successfully!","success")}catch(t){console.error("Error downloading PDF:",t),o.show("Failed to download invoice. Please try again.","error")}finally{g(!1)}}};return p?e.jsx(B,{}):r?e.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold dark:text-white mb-2",children:"Order Details"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Order #",r.id]})]}),e.jsxs(L,{to:"/supplier/dashboard/orders",className:"bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-xl font-semibold transition-all duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Orders"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Order Summary"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Order ID"}),e.jsx("div",{className:"font-semibold dark:text-white text-lg",children:r.id})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-2 w-fit ${b(r.status)}`,children:[j(r.status),r.status||"Unknown"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Created At"}),e.jsx("div",{className:"font-semibold dark:text-white",children:k(r.created_at)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Updated At"}),e.jsx("div",{className:"font-semibold dark:text-white",children:k(r.updated_at)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Subtotal"}),e.jsxs("div",{className:"font-semibold dark:text-white text-blue-600",children:["$",parseFloat(r.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Discount"}),e.jsxs("div",{className:"font-semibold dark:text-white",children:["$",parseFloat(r.discount||0).toFixed(2)]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Notes"}),e.jsx("div",{className:"font-semibold dark:text-white bg-gray-50 dark:bg-gray-900 rounded-lg p-3",children:r.notes||"No notes provided"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Client Information"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Client Name"}),e.jsx("div",{className:"font-semibold dark:text-white text-lg",children:r.client?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Email"}),e.jsx("div",{className:"font-semibold dark:text-white",children:r.client?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Phone"}),e.jsx("div",{className:"font-semibold dark:text-white",children:r.client?.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Client ID"}),e.jsx("div",{className:"font-semibold dark:text-white",children:r.client_id||"N/A"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("h2",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),"Order Items"]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:[e.jsx("th",{className:"text-left p-3 font-semibold",children:"Product"}),e.jsx("th",{className:"p-3 text-center font-semibold",children:"Quantity"}),e.jsx("th",{className:"p-3 text-center font-semibold",children:"Unit Price"}),e.jsx("th",{className:"p-3 text-center font-semibold",children:"Total"})]})}),e.jsx("tbody",{children:r.items?.map(t=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[e.jsxs("td",{className:"p-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium dark:text-white",children:t.product?.name||"Unknown Product"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["SKU: ",t.product?.id||"N/A"]})]})]}),e.jsx("td",{className:"p-3 text-center dark:text-white font-medium",children:t.quantity}),e.jsxs("td",{className:"p-3 text-center dark:text-white",children:["$",parseFloat(t.unit_price||0).toFixed(2)]}),e.jsxs("td",{className:"p-3 text-center font-semibold dark:text-white text-blue-600",children:["$",parseFloat(t.total||0).toFixed(2)]})]},t.id))})]})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("h3",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Order Total"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal:"}),e.jsxs("span",{className:"font-semibold dark:text-white",children:["$",parseFloat(r.subtotal||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Discount:"}),e.jsxs("span",{className:"font-semibold dark:text-white",children:["-$",parseFloat(r.discount||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg px-3",children:[e.jsx("span",{className:"text-lg font-bold dark:text-white",children:"Total:"}),e.jsxs("span",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:["$",parseFloat(r.total||0).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("h3",{className:"text-xl font-bold dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})}),"Order Actions"]})}),e.jsxs("div",{className:"p-6 space-y-3",children:[r.status==="pending"&&e.jsx("button",{onClick:()=>l("processing"),disabled:a,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-3 rounded-xl shadow-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-60",children:a?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})}),"Start Processing"]})}),r.status==="processing"&&e.jsx("button",{onClick:()=>l("deliver"),disabled:a,className:"w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-3 rounded-xl shadow-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-60",children:a?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Marking as Delivered..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Mark as Delivered"]})}),(r.status==="pending"||r.status==="processing")&&e.jsx("button",{onClick:()=>l("cancel"),disabled:a,className:"w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold py-3 rounded-xl shadow-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-60",children:a?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Cancelling..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel Order"]})}),r.status==="delivered"&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"text-green-600 dark:text-green-400 font-semibold",children:"Order Completed"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This order has been successfully delivered"})]}),r.status==="cancelled"&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 font-semibold",children:"Order Cancelled"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This order has been cancelled"})]}),e.jsx("button",{onClick:v,disabled:m,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-xl shadow-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-60",children:m?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Invoice"]})})]})]})]})]})]}):e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-300",children:"Order not found."})}export{A as default};
