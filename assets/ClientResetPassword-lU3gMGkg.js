import{r as i,b as g,c as j,a as y,j as e,L as N}from"./index-BBFhNgLA.js";import{p as P}from"./api-BUuAVsLY.js";const E=()=>{const[d,u]=i.useState(""),[n,x]=i.useState(""),[c,p]=i.useState(""),[r,o]=i.useState(!1),[t,l]=i.useState(""),w=g(),f=j().state?.email||"",m=y(),v=s=>{const a=[];return s.length<8&&a.push("Password must be at least 8 characters long"),/[A-Z]/.test(s)||a.push("Password must contain at least one uppercase letter"),/[a-z]/.test(s)||a.push("Password must contain at least one lowercase letter"),/[!@#$%^&*(),.?":{}|<>]/.test(s)||a.push("Password must contain at least one symbol"),a},b=async s=>{if(s.preventDefault(),o(!0),l(""),!d.trim()){l("Reset code is required"),o(!1);return}const a=v(n);if(a.length>0){l(a.join(". ")),o(!1);return}if(n!==c){l("Password confirmation does not match"),o(!1);return}try{await P("/api/client/reset-password",{data:{email_or_phone:f,code:d,password:n,password_confirmation:c}}),m.show("Password reset successful!","success"),w("/login-client")}catch(h){l(h.message||"Failed to reset password"),m.show(h.message||"Failed to reset password","error")}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-theme-bg px-2 py-8",role:"main",children:e.jsxs("div",{className:"theme-card w-full max-w-md p-8 sm:p-10 flex flex-col items-center",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-center mb-2 tracking-tight text-theme-text",children:"Reset Password"}),e.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full mb-8"}),e.jsx("p",{className:"text-theme-text-secondary text-center mb-6",children:"Enter the reset code sent to your email and your new password."}),e.jsxs("form",{onSubmit:b,className:"w-full flex flex-col gap-6","aria-busy":r,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"code",className:"text-base font-medium text-theme-text",children:"Reset Code"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-theme-text-muted","aria-hidden":"true",children:e.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("input",{id:"code",type:"text",required:!0,className:"theme-input w-full pl-10 pr-4 py-3 rounded-md text-base shadow-sm",placeholder:"Enter reset code",value:d,onChange:s=>u(s.target.value),disabled:r,"aria-invalid":!!t,"aria-describedby":t?"code-error":void 0})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"password",className:"text-base font-medium text-theme-text",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-theme-text-muted","aria-hidden":"true",children:e.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M12 17a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6-6V9a6 6 0 1 0-12 0v2a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2Zm-8-2a4 4 0 1 1 8 0v2H8V9Z"})})}),e.jsx("input",{id:"password",type:"password",autoComplete:"new-password",required:!0,className:"theme-input w-full pl-10 pr-4 py-3 rounded-md text-base shadow-sm",placeholder:"Enter new password",value:n,onChange:s=>x(s.target.value),disabled:r,"aria-invalid":!!t,"aria-describedby":t?"password-error":void 0})]}),e.jsx("p",{className:"text-xs text-theme-text-muted mt-1",children:"Password must be at least 8 characters with uppercase, lowercase, and symbol"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"text-base font-medium text-theme-text",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-theme-text-muted","aria-hidden":"true",children:e.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M12 17a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6-6V9a6 6 0 1 0-12 0v2a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2Zm-8-2a4 4 0 1 1 8 0v2H8V9Z"})})}),e.jsx("input",{id:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"theme-input w-full pl-10 pr-4 py-3 rounded-md text-base shadow-sm",placeholder:"Confirm new password",value:c,onChange:s=>p(s.target.value),disabled:r,"aria-invalid":!!t,"aria-describedby":t?"password-error":void 0})]})]}),t&&e.jsx("div",{id:"password-error",className:"text-red-500 text-sm mt-1",role:"alert",children:t}),e.jsxs("button",{type:"submit",disabled:r,"aria-label":"Reset password",className:"theme-button w-full py-3 font-bold rounded-lg shadow-lg hover:scale-[1.02] hover:shadow-xl active:scale-95 transition-all duration-150 disabled:opacity-60 text-base mt-2 flex items-center justify-center gap-2",children:[r&&e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),r?"Resetting...":"Reset Password"]}),e.jsx("div",{className:"text-center",children:e.jsx(N,{to:"/login-client",className:"text-primary-600 hover:underline focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2 rounded",children:"Back to Login"})})]})]})})};export{E as default};
