import{r as i,u as b,a as v,j as e}from"./index-BBFhNgLA.js";import{p as j}from"./api-BUuAVsLY.js";const y=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;function L(){const[o,p]=i.useState({email:"",password:""}),[t,u]=i.useState({}),[m,h]=i.useState(!1),[d,w]=i.useState(!1),{login:x}=b(),n=v(),c=i.useCallback((l,s)=>{switch(l){case"email":return s.trim()?y.test(s.trim())?"":"Please enter a valid email address.":"Email is required.";case"password":return s?s.length<6?"Password must be at least 6 characters.":"":"Password is required.";default:return""}},[]),f=i.useCallback(l=>{const{name:s,value:a}=l.target;p(r=>({...r,[s]:a})),t[s]&&u(r=>({...r,[s]:c(s,a)}))},[t,c]),g=i.useCallback(async l=>{l.preventDefault();const s={};if(Object.keys(o).forEach(a=>{s[a]=c(a,o[a])}),u(s),Object.values(s).some(a=>a)){n.show("Please fix the errors in the form.","error");return}h(!0);try{const a={email:o.email.trim(),password:o.password},r=await j("/api/v1/login",{data:a});if(r.data&&r.data.token&&r.data.admin)x(r.data.token,{...r.data.admin,role:"admin"}),n.show("Login successful! Welcome back!","success"),setTimeout(()=>window.location.href="/admin-dashboard",1e3);else throw new Error(r.message||"Login failed")}catch(a){n.show(a.message||"Login failed. Please check your credentials.","error")}finally{h(!1)}},[o,c,x,n]);return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-theme-bg px-2 py-8",role:"main",children:e.jsxs("div",{className:"theme-card w-full max-w-md p-8 sm:p-10 flex flex-col items-center",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-extrabold mb-2 tracking-tight text-theme-text",children:"Admin Login"}),e.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-theme-text-secondary text-sm",children:"Access the administrative dashboard"})]}),e.jsxs("form",{onSubmit:g,className:"w-full flex flex-col gap-6","aria-busy":m,noValidate:!0,children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"email",className:"text-base font-medium text-theme-text",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-theme-text-muted","aria-hidden":"true",children:e.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M3 6.75A2.75 2.75 0 0 1 5.75 4h12.5A2.75 2.75 0 0 1 21 6.75v10.5A2.75 2.75 0 0 1 18.25 20H5.75A2.75 2.75 0 0 1 3 17.25V6.75Zm0 0L12 13.25L21 6.75"})})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"username",required:!0,className:`theme-input w-full pl-10 pr-4 py-3 rounded-lg text-base shadow-sm transition-colors ${t.email?"border-red-300 bg-red-50 dark:bg-red-900/20 focus:ring-red-400 focus:border-red-400":""}`,placeholder:"Enter your email address",value:o.email,onChange:f,"aria-invalid":!!t.email,"aria-describedby":t.email?"email-error":void 0})]}),t.email&&e.jsx("div",{id:"email-error",className:"text-red-500 dark:text-red-400 text-sm",role:"alert",children:t.email})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"password",className:"text-base font-medium text-theme-text",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-theme-text-muted","aria-hidden":"true",children:e.jsx("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{id:"password",name:"password",type:d?"text":"password",autoComplete:"current-password",required:!0,className:`theme-input w-full pl-10 pr-12 py-3 rounded-lg text-base shadow-sm transition-colors ${t.password?"border-red-300 bg-red-50 dark:bg-red-900/20 focus:ring-red-400 focus:border-red-400":""}`,placeholder:"Enter your password",value:o.password,onChange:f,"aria-invalid":!!t.password,"aria-describedby":t.password?"password-error":void 0}),e.jsx("button",{type:"button",onClick:()=>w(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-md text-theme-text-muted hover:text-theme-text hover:bg-theme-surface transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2 focus:ring-offset-theme-card","aria-label":d?"Hide password":"Show password",title:d?"Hide password":"Show password",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})})]}),t.password&&e.jsx("div",{id:"password-error",className:"text-red-500 dark:text-red-400 text-sm",role:"alert",children:t.password})]}),e.jsx("button",{type:"submit",disabled:m,className:"theme-button w-full py-3 font-bold rounded-lg shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2 focus:ring-offset-theme-card disabled:opacity-60 disabled:cursor-not-allowed transform hover:scale-105","aria-label":"Sign in to admin account",children:m?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Signing In..."]}):"Sign In"})]}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("p",{className:"text-theme-text-secondary text-sm",children:"Need help? Contact your system administrator"}),e.jsx("div",{className:"mt-4 text-xs text-theme-text-muted",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Secure Admin Access"]})})]})]})})}export{L as default};
