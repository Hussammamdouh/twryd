import{k as f,u as j,a as v,r as s,R as N,j as e,L as d}from"./index-BBFhNgLA.js";import{g as w}from"./api-BUuAVsLY.js";import{d as L}from"./pdfUtils-DNxLv-n2.js";import{S as F}from"./Spinner-DiswAH3X.js";function _(){const{orderId:i}=f(),{token:o}=j(),l=v(),[r,n]=s.useState(null),[y,c]=s.useState(!0),[x,m]=s.useState(!1),p=N.useMemo(()=>!r||!r.items?[]:[{supplier_id:r.supplier_id,supplier:r.supplier,items:r.items}],[r]);s.useEffect(()=>{(async()=>{c(!0);try{const t=await w(`/api/client/orders/${i}`,{token:o});n(t.data||null)}catch{n(null)}finally{c(!1)}})()},[i,o]);const h=(r&&r.items?r.items:[]).reduce((a,t)=>a+parseFloat(t.total||0),0),g=r&&r.delivery_fee?r.delivery_fee:0,b=h+g,k=async()=>{if(r){m(!0);try{await L(r,"client"),l.show("Invoice downloaded successfully!","success")}catch(a){console.error("Error downloading PDF:",a),l.show("Failed to download invoice. Please try again.","error")}finally{m(!1)}}};return y?e.jsx(F,{}):r?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl",children:e.jsx("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-900 dark:text-white",children:"Order Confirmed!"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-normal text-lg sm:text-xl ml-2",children:"Thank you for your purchase"})]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"A confirmation email has been sent. You can track your order in your dashboard."}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg px-4 py-2 border border-gray-200 dark:border-gray-700 mt-4 inline-block",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:["Order #",r.order_number||r.id]})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Order Summary"]})}),e.jsxs("div",{className:"p-6",children:[p.map(a=>e.jsxs("div",{className:"mb-6 bg-gray-50 dark:bg-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:a.supplier?.name||"Supplier"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.supplier?.email||""}),a.supplier?.phone&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Phone: ",a.supplier.phone]}),a.supplier?.address&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Address: ",a.supplier.address]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm mb-4",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-300",children:[e.jsx("th",{className:"text-left p-3 font-semibold",children:"Product"}),e.jsx("th",{className:"p-3 text-center font-semibold",children:"Quantity"}),e.jsx("th",{className:"p-3 text-center font-semibold",children:"Price"}),e.jsx("th",{className:"p-3 text-center font-semibold",children:"Subtotal"})]})}),e.jsx("tbody",{children:a.items.map(t=>e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("td",{className:"p-3 text-gray-900 dark:text-white font-medium",children:t.product?.name||t.name||"Unknown Product"}),e.jsx("td",{className:"p-3 text-center text-gray-900 dark:text-white",children:t.quantity||0}),e.jsxs("td",{className:"p-3 text-center text-gray-900 dark:text-white",children:["$",parseFloat(t.unit_price||0).toFixed(2)]}),e.jsxs("td",{className:"p-3 text-center font-semibold text-primary-600 dark:text-primary-400",children:["$",parseFloat(t.total||0).toFixed(2)]})]},t.id))})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 text-sm",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Delivery Method"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:a.supplier?.delivery_method||"Standard"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Estimated Delivery"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:a.supplier?.estimated_delivery||"2024-06-15"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-gray-600 dark:text-gray-400 mb-1",children:"Assigned Warehouse"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:a.supplier?.warehouse||"WH-001"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:["Supplier Subtotal: $",a.items.reduce((t,u)=>t+parseFloat(u.total||0),0).toFixed(2)]})})]},a.supplier_id)),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mt-4",children:[e.jsx("div",{className:"font-semibold mb-2 text-gray-900 dark:text-white",children:"Shipping & Contact Information"}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-200 mb-1",children:["Address: ",r.shipping_address||"16 Garden Street, Cairo"]}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-200 mb-1",children:["Phone: ",r.shipping_phone||"+201234567890"]}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:["Contact: ",r.contact_name||"Ahmed Youssef"]})]})]})]})}),e.jsx("div",{className:"w-full lg:w-96 flex-shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Order Total"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Items Total:"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",h.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Delivery Fees:"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["$",g.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg px-3",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Final Amount:"}),e.jsxs("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:["$",b.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs(d,{to:`/client/dashboard/orders/${r.id}`,className:"w-full block bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white font-semibold py-3 rounded-xl shadow-lg transition-all duration-200 text-center flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Track this Order"]}),e.jsxs(d,{to:"/client/dashboard/my-marketplace",className:"w-full block bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-700 dark:text-gray-300 dark:from-gray-700 dark:to-gray-600 dark:hover:from-gray-600 dark:hover:to-gray-500 rounded-xl py-3 font-semibold transition-all duration-200 text-center flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7V6a2 2 0 012-2h14a2 2 0 012 2v1M5 7h14l1 5H4l1-5zm2 8a2 2 0 104 0 2 2 0 00-4 0zm10 0a2 2 0 104 0 2 2 0 00-4 0z"})}),"Continue Shopping"]}),e.jsxs("button",{className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-500 dark:text-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-xl py-3 font-semibold transition-all duration-200 flex items-center justify-center gap-2",disabled:x,onClick:k,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),x?"Downloading...":"Download Invoice"]})]})]})]})})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-24",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Order not found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"We couldn't find your order. Please check your order ID or contact support."}),e.jsx(d,{to:"/client/dashboard/orders",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-semibold",children:"Go to Orders"})]})}export{_ as default};
